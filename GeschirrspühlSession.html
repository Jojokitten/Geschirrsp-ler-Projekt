<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Geschirrspüler-Projekt</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="styles.css">
<style>
/* Generelle Stile (Simulation von SafeAreaView und ScrollView) */
body {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    background-color: rgb(230, 173, 204);
}

.container {
    padding-top: 20px; /* Simuliert SafeAreaView top */
    min-height: 100vh;
}

.scroll-content {
    padding: 20px;
    padding-bottom: 100px; /* Platz für Scroll-Ende */
}

/* Titel */
.title {
    font-size: 40px;
    font-weight: bold;
    text-align: center;
    color: #d71c79;
    margin-bottom: 30px;
    margin-top: 20px;
}

/* Timer Card */
.timer-card {
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 30px;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.25); /* Simulation von Elevation/Shadow */
}

.timer-gradient {
    padding: 30px;
    text-align: center;
    background: linear-gradient(135deg, #eb71ae, #d71c79); /* Konvertierter LinearGradient */
}

.timer-text {
    font-size: 56px;
    font-weight: bold;
    color: #fff;
    letter-spacing: 2px;
    margin: 0;
}

.timer-label {
    font-size: 14px;
    color: #fff;
    margin-top: 10px;
    opacity: 0.9;
}

/* Controls */
.controls-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;
}

.button-row {
    display: flex;
    gap: 15px;
}

.control-button {
    flex: 1;
    height: 80px;
    border-radius: 15px;
    align-items: center;
    justify-content: center;
    display: flex;
    flex-direction: column;
    gap: 5px;
    border: none;
    cursor: pointer;
    padding: 0;
}

.control-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.start-button {
    background-color: rgb(34, 139, 34);
    color: #fff;
}

.pause-button {
    background-color: rgb(255, 140, 0);
    color: #fff;
}

.save-button {
    background-color: rgb(137, 1, 44);
    color: #fff;
}

.reset-button {
    background-color: rgba(255, 255, 255, 0.9);
    border: 2px solid rgb(191, 27, 142);
    flex-direction: row;
    height: 60px;
    color: rgb(137, 1, 44);
    font-size: 16px;
    font-weight: bold;
}

.control-button span {
    font-size: 30px; /* Für die Iconsymbole */
}

.reset-button span:first-child {
    font-size: 24px;
    margin-right: 5px;
    color: rgb(137, 1, 44);
}

.reset-text {
    color: rgb(137, 1, 44);
    font-weight: bold;
}

/* Saved Times Section */
.saved-times-section {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.saved-times-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.saved-times-title {
    font-size: 24px;
    font-weight: bold;
    color: rgb(137, 1, 44);
    margin: 0;
}

.clear-button {
    padding: 8px 15px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    border: 1px solid rgb(191, 27, 142);
    cursor: pointer;
}

.clear-button-text {
    color: rgb(137, 1, 44);
    font-size: 14px;
    font-weight: bold;
    margin: 0;
}

.saved-times-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.saved-time-item {
    display: flex;
    align-items: center;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 12px;
    padding: 15px;
    gap: 15px;
    border: 1px solid rgb(191, 27, 142);
}

.saved-time-number {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    background-color: rgb(137, 1, 44);
    display: flex;
    align-items: center;
    justify-content: center;
}

.saved-time-number-text {
    color: #fff;
    font-size: 16px;
    font-weight: bold;
    margin: 0;
}

.saved-time-text {
    font-size: 20px;
    font-weight: 600;
    color: rgb(137, 1, 44);
    letter-spacing: 1px;
    margin: 0;
}

/* Total Time */
.total-time-card {
    border-radius: 15px;
    overflow: hidden;
    margin-top: 10px;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
}

.total-time-gradient {
    padding: 20px;
    text-align: center;
    background: linear-gradient(135deg, #d71c79, #b92d71); /* Konvertierter LinearGradient */
}

.total-time-label {
    font-size: 16px;
    color: #fff;
    margin-bottom: 5px;
    opacity: 0.9;
}

.total-time-text {
    font-size: 32px;
    font-weight: bold;
    color: #fff;
    letter-spacing: 1px;
    margin: 0;
}

.hidden {
    display: none;
}
</style>
<style> 
.loader {
  --color-one: #ffbf48;
  --color-two: #be4a1d;
  --color-three: #ffbf4780;
  --color-four: #bf4a1d80;
  --color-five: #ffbf4740;
  --time-animation: 2s;
  --size: 10; /* You can change the size */
  position: relative;
  transform: scale(var(--size));
  animation: colorize calc(var(--time-animation) * 3) ease-in-out infinite;
z-index: -1;
top:400px;
left:5800px;
}

.loader::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  border-top: solid 1px var(--color-one);
  border-bottom: solid 1px var(--color-two);
  background: linear-gradient(180deg, var(--color-five), var(--color-four));
  box-shadow:
    inset 0 10px 10px 0 var(--color-three),
    inset 0 -10px 10px 0 var(--color-four);
}

.loader .box {
  width: 100px;
  height: 100px;
  background: linear-gradient(
    180deg,
    var(--color-one) 30%,
    var(--color-two) 70%
  );
  mask: url(#clipping);
  -webkit-mask: url(#clipping);
}

.loader svg {
  position: absolute;
}

.loader svg #clipping {
  filter: contrast(15);
  animation: roundness calc(var(--time-animation) / 2) linear infinite;
}

.loader svg #clipping polygon {
  filter: blur(7px);
}

.loader svg #clipping polygon:nth-child(1) {
  transform-origin: 75% 25%;
  transform: rotate(90deg);
}

.loader svg #clipping polygon:nth-child(2) {
  transform-origin: 50% 50%;
  animation: rotation var(--time-animation) linear infinite reverse;
}

.loader svg #clipping polygon:nth-child(3) {
  transform-origin: 50% 60%;
  animation: rotation var(--time-animation) linear infinite;
  animation-delay: calc(var(--time-animation) / -3);
}

.loader svg #clipping polygon:nth-child(4) {
  transform-origin: 40% 40%;
  animation: rotation var(--time-animation) linear infinite reverse;
}

.loader svg #clipping polygon:nth-child(5) {
  transform-origin: 40% 40%;
  animation: rotation var(--time-animation) linear infinite reverse;
  animation-delay: calc(var(--time-animation) / -2);
}

.loader svg #clipping polygon:nth-child(6) {
  transform-origin: 60% 40%;
  animation: rotation var(--time-animation) linear infinite;
}

.loader svg #clipping polygon:nth-child(7) {
  transform-origin: 60% 40%;
  animation: rotation var(--time-animation) linear infinite;
  animation-delay: calc(var(--time-animation) / -1.5);
}

@keyframes rotation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes roundness {
  0% {
    filter: contrast(15);
  }
  20% {
    filter: contrast(3);
  }
  40% {
    filter: contrast(3);
  }
  60% {
    filter: contrast(15);
  }
  100% {
    filter: contrast(15);
  }
}

@keyframes colorize {
  0% {
    filter: hue-rotate(0deg);
  }
  20% {
    filter: hue-rotate(-30deg);
  }
  40% {
    filter: hue-rotate(-60deg);
  }
  60% {
    filter: hue-rotate(-90deg);
  }
  80% {
    filter: hue-rotate(-45deg);
  }
  100% {
    filter: hue-rotate(0deg);
  }
}
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- 1. DOM-Elemente und Konstanten ---
        const SAVED_TIMES_KEY = 'saved_times';
        
        const timerDisplay = document.getElementById('timerDisplay');
        const startButton = document.getElementById('startButton');
        const saveButton = document.getElementById('saveButton');
        const resetButton = document.getElementById('resetButton');
        const clearAllButton = document.getElementById('clearAllButton');
        const savedTimesList = document.getElementById('savedTimesList');
        const savedTimesSection = document.querySelector('.saved-times-section');
        const totalTimeDisplay = document.getElementById('totalTimeDisplay');
        const flameAnimation = document.querySelector('.loader');
        // --- 2. State-Variablen (ersetzen React's useState) ---
        let time = 0; // Zeit in Millisekunden
        let isRunning = false;
        let intervalId = null;
        let savedTimes = []; // Array zur Speicherung der Zeiten

        // --- 3. Hilfsfunktionen ---

        /**
         * Formatiert Millisekunden in HH:MM:SS (deine originale Logik)
         */
        const formatTime = (milliseconds) => {
            const totalSeconds = Math.floor(milliseconds / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;

            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        };

        /**
         * Berechnet die Gesamtsumme aller gespeicherten Zeiten.
         */
        const calculateTotalTime = () => {
            const total = savedTimes.reduce((sum, item) => sum + item.time, 0);
            return formatTime(total);
        };

        // --- 4. Render- und Update-Funktionen ---

        /**
         * Aktualisiert den Timer-Anzeigetext.
         */
        const updateTimerDisplay = () => {
            timerDisplay.textContent = formatTime(time);
            saveButton.disabled = time === 0;
            updateStartButton(); // Aktualisiert Start/Pause-Button
        };

        /**
         * Erstellt und aktualisiert die Liste der gespeicherten Zeiten und die Gesamtsumme.
         */
        const renderSavedTimes = () => {
            savedTimesList.innerHTML = ''; // Liste leeren
            
            if (savedTimes.length === 0) {
                savedTimesSection.classList.add('hidden');
                totalTimeDisplay.textContent = formatTime(0);
                return;
            }

            savedTimesSection.classList.remove('hidden');
            
            savedTimes.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'saved-time-item';
                
                itemDiv.innerHTML = `
                    <div class="saved-time-number">
                        <p class="saved-time-number-text">${index + 1}</p>
                    </div>
                    <p class="saved-time-text">${formatTime(item.time)}</p>
                `;
                savedTimesList.appendChild(itemDiv);
            });

            totalTimeDisplay.textContent = calculateTotalTime();
        };

        /**
         * Aktualisiert den Start/Pause-Button-Text und Stil.
         */
        const updateStartButton = () => {
            if (!flameAnimation) return;
            if (isRunning) {
                startButton.className = 'control-button pause-button';
                startButton.innerHTML = '<span>❚❚</span> <span>Pause</span>';
                 flameAnimation.style.visibility = 'visible';
            } else {
                startButton.className = 'control-button start-button';
                startButton.innerHTML = '<span>▶</span> <span>Start</span>';
                flameAnimation.style.visibility = 'hidden';
            }
        };


        // --- 5. LocalStorage Funktionen ---

        const saveTimes = () => {
            try {
                localStorage.setItem(SAVED_TIMES_KEY, JSON.stringify(savedTimes));
            } catch (error) {
                console.error('Error saving times:', error);
            }
        };

        const loadSavedTimes = () => {
            try {
                const savedData = localStorage.getItem(SAVED_TIMES_KEY);
                if (savedData !== null) {
                    savedTimes = JSON.parse(savedData);
                    renderSavedTimes();
                }
            } catch (error) {
                console.error('Error loading saved times:', error);
            }
        };


        // --- 6. Event Handler Logik ---

        const handleStartPause = () => {
            if (isRunning) {
                // PAUSE
                clearInterval(intervalId);
                intervalId = null;
                isRunning = false;
            } else {
                // START
                intervalId = setInterval(() => {
                    time += 1000; // Zählt in 1-Sekunden-Schritten
                    updateTimerDisplay();
                }, 1000); // Intervall auf 1000ms (1 Sekunde) gesetzt
                isRunning = true;
            }
            updateStartButton();
        };

        const handleSave = () => {
            if (time > 0) {
                // Pause erzwingen, wenn gespeichert wird
                if (isRunning) {
                    handleStartPause(); // Pausiert den Timer
                }

                const newSavedTime = {
                    id: Date.now().toString(),
                    time: time,
                    // Im Browser speichern wir das Datum als String
                    timestamp: new Date().toISOString(), 
                };
                
                // Neue Zeit hinzufügen und State aktualisieren
                savedTimes.push(newSavedTime);
                
                // Timer zurücksetzen
                time = 0;
                updateTimerDisplay();
                
                // UI und LocalStorage aktualisieren
                renderSavedTimes();
                saveTimes();
            }
        };

        const handleReset = () => {
            // Stoppen und zurücksetzen
            if (isRunning) {
                handleStartPause(); // Pausiert
            }
            time = 0;
            updateTimerDisplay();
        };

        const handleClearAll = () => {
            savedTimes = [];
            saveTimes();
            renderSavedTimes();
        };

        // --- 7. Event Listener registrieren ---
        
        startButton.addEventListener('click', handleStartPause);
        saveButton.addEventListener('click', handleSave);
        resetButton.addEventListener('click', handleReset);
        clearAllButton.addEventListener('click', handleClearAll);

        // --- 8. Initialisierung ---
        
        loadSavedTimes();
        updateTimerDisplay(); // Setzt den initialen Text (00:00:00) und Button-State
    });
</script>

<body>
    <h1>Geschirspüler-Liste <3</h1>
  <ul>
    <li><a href="Geschirrspüler-Projekt.html">Geschirspüler-Liste</a></li>
    <li><a href="statistic.html">Statistik</a></li>
    <li><a href="motivation.html">Motivation</a></li>
        <li><a href="geschirrspühl-tagebuch.html">Geschirrspühl-Tagebuch</a></li>
     <li><a href="profile.html">Profile</a></li>
  </ul>
<button onclick="window.location.href='GeschirrspühlSession.html'" class="startGeschirrspühlsession"> +&nbsp;&nbsp;&nbsp;&nbsp;Start Geschirrspühl-Session</button>
<div class="loader">
  <svg width="100" height="100" viewBox="0 0 100 100">
    <defs>
      <mask id="clipping">
        <polygon points="0,0 100,0 100,100 0,100" fill="black"></polygon>
        <polygon points="25,25 75,25 50,75" fill="white"></polygon>
        <polygon points="50,25 75,75 25,75" fill="white"></polygon>
        <polygon points="35,35 65,35 50,65" fill="white"></polygon>
        <polygon points="35,35 65,35 50,65" fill="white"></polygon>
        <polygon points="35,35 65,35 50,65" fill="white"></polygon>
        <polygon points="35,35 65,35 50,65" fill="white"></polygon>
      </mask>
    </defs>
  </svg>
  <div class="box"></div>
</div>
<div class="container">
        <div class="scroll-content">
            <h1 class="title">Stopuhr</h1>

            <div class="timer-card">
                <div class="timer-gradient">
                    <p class="timer-text" id="timerDisplay">00:00:00</p>
                    <p class="timer-label">Hours : Minutes : Seconds</p>
                </div>
            </div>

            <div class="controls-container">
                <div class="button-row">
                    <button class="control-button start-button" id="startButton">
                        <span>▶</span> <span>Start</span>
                    </button>
                    <button class="control-button save-button" id="saveButton" disabled>
                        <span>⬇</span> <span>Save</span>
                    </button>
                </div>

                <button class="control-button reset-button" id="resetButton">
                    <span>↺</span> <span class="reset-text">Reset</span>
                </button>
            </div>

            <div class="saved-times-section hidden">
                <div class="saved-times-header">
                    <p class="saved-times-title">Saved Times</p>
                    <button class="clear-button" id="clearAllButton">
                        <p class="clear-button-text">Clear All</p>
                    </button>
                </div>

                <div class="saved-times-list" id="savedTimesList">
                    </div>

                <div class="total-time-card">
                    <div class="total-time-gradient">
                        <p class="total-time-label">Total Time</p>
                        <p class="total-time-text" id="totalTimeDisplay">00:00:00</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="playlist-container">
        <h1>🎧 Playlist</h1>
        
        <div id="songTitle" class="song-title">Song wird geladen...</div>

        <audio id="audioPlayer" src="" preload="auto"></audio>

        <div class="controls">
            <button id="prevBtn" class="control-btn">⏮</button>
            <button id="playPauseBtn" class="control-btn">▶</button>
            <button id="nextBtn" class="control-btn">⏭</button>
        </div>
    </div>
</body>

</html>